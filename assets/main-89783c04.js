import{C as s,P as t,B as n}from"./ProdutoModel-7eb1101e.js";import{C as o}from"./CarrinhoModel-6eadc908.js";class c{constructor(){this.model=new o,this.view=new s(this.model,t.listar())}inicializar(){this.view.renderizarTodos(this),this.ativarBotaoFinalizarCompra(),document.getElementById("abrir-carrinho").addEventListener("click",()=>{document.getElementById("carrinho").classList.replace("right-[-360px]","right-[0px]")}),document.getElementById("fechar-carrinho").addEventListener("click",()=>{document.getElementById("carrinho").classList.replace("right-[0px]","right-[-360px]")})}adicionar(i){this.model.adicionar(i);const e=t.listar().find(r=>r.id===i);this.view.desenharProduto(e,this),this.view.atualizarPreco(),this.ativarBotaoFinalizarCompra()}remover(i){this.model.remover(i),this.view.renderizarTodos(this),this.ativarBotaoFinalizarCompra()}incrementar(i){this.model.incrementar(i),this.view.atualizarQuantidade(i),this.view.atualizarPreco()}decrementar(i){this.model.decrementar(i),this.view.renderizarTodos(this),this.ativarBotaoFinalizarCompra()}ativarBotaoFinalizarCompra(){const i=document.getElementById("finalizar-compra");i&&(i.onclick=()=>{const e=new o().obterItens();Object.keys(e).length>0?window.location.href="./checkout.html":alert("Seu carrinho estÃ¡ vazio!")})}}class l{constructor(i){this.view=i,this.view.controller=this,this.carrinho=new o,this.catalogo=t.listar(),this.carrinhoView=new s(this.carrinho,this.catalogo)}inicializar(){this.view.renderizarCatalogo(this.catalogo),this.view.configurarBotoesFiltro(),this.atualizarCarrinhoView()}adicionarAoCarrinho(i){this.carrinho.adicionar(i),this.atualizarCarrinhoView()}atualizarCarrinhoView(){this.carrinhoView.renderizarTodos({remover:i=>{this.carrinho.remover(i),this.atualizarCarrinhoView()},incrementar:i=>{this.carrinho.incrementar(i),this.atualizarCarrinhoView()},decrementar:i=>{this.carrinho.decrementar(i),this.atualizarCarrinhoView()}})}filtrar(i){i==="todos"?this.view.exibirTodos():i==="notebooks"?this.view.esconderApenas("acessorio"):i==="acessorios"&&this.view.esconderApenas("notebook")}}class d{constructor(i,e="container-produto"){this.controller=i,this.container=document.getElementById(e)}exibirTodos(){this.container.querySelectorAll(".hidden").forEach(e=>e.classList.remove("hidden"))}esconderApenas(i){this.exibirTodos(),this.container.querySelectorAll(`.${i}`).forEach(r=>r.classList.add("hidden"))}configurarBotoesFiltro(){document.getElementById("exibir-todos").addEventListener("click",()=>this.controller.filtrar("todos")),document.getElementById("exibir-notebooks").addEventListener("click",()=>this.controller.filtrar("notebooks")),document.getElementById("exibir-acessorios").addEventListener("click",()=>this.controller.filtrar("acessorios"))}renderizarCatalogo(i){this.container.innerHTML="",i.forEach(e=>{const r=document.createElement("div");r.className=`border-solid w-48 m-2 flex flex-col p-2 justify-between shadow-xl shadow-slate-400 rounded-lg group ${e.acessorio?"acessorio":"notebook"}`,r.id=`card-produto-${e.id}`,r.innerHTML=`
                <img src="${n}assets/img/${e.imagem}" alt="${e.nome}" class="group-hover:scale-110 duration-300 my-3 rounded-lg">
                <p class="text-sm">${e.marca}</p>
                <p class="text-sm">${e.nome}</p>
                <p class="text-sm">${e.preco}</p>
                <button id="adicionar-${e.id}" class="bg-slate-950 hover:bg-slate-700 text-slate-200 py-3 px-4 rounded-lg w-full  transition duration-300">
                    <i class="fa-solid fa-cart-plus"></i>
                </button>`,this.container.appendChild(r),document.getElementById(`adicionar-${e.id}`).addEventListener("click",()=>this.controller.adicionarAoCarrinho(e.id))})}}const h=new c;h.inicializar();const m=new d,u=new l(m);u.inicializar();
